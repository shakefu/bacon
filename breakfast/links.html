<head>
<link type="text/css" rel="stylesheet" href="https://www.gstatic.com/freebase/suggest/4_2/suggest.min.css" />
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.js"></script>
<script type="text/javascript" src="https://www.gstatic.com/freebase/suggest/4_2/suggest.min.js"></script>
</head>
<template name="links">
<div class="row">
  <div class="columns eight centered">
    <h2>All the Links</h2>
  </div>
</div>
<div class="row link-edit">
  <div class="columns eight centered">
    <div class="row link-status">
      {{#if editing._id}}
      {{#with editing}}
      {{#if editing.text}}New link - {{> link}}{{else}}Editing new link...{{/if}}
      {{/with}}
      {{else}}
      Create a new link...
      {{/if}}
    </div>
    <div class="row">
      {{> linkForm}}
    </div>
  </div>
</div>
<div class="row">
  <div class="columns eight centered">
    <ul>
    {{# each all_links }}
      <li>{{> link}}</li>
    {{/each}}
    </ul>
  </div>
</div>
</template>

<template name="linkForm">
  <form onsubmit="return false">
    <div class="row field">
      <input type="url" placeholder="URL" class="input" name="url" value="{{doc.url}}" required/>
    </div>
    <div class="row field">
      <input type="text" placeholder="What is it?" name="text" value="{{doc.text}}" class="input" required/>
    </div>
    <div class="row field">
      <input type="text" placeholder="Add tags..." class="input"/>
    </div>
    <div class="row">
      {{ edit_text_tags }}&nbsp;
    </div>
    <input type="submit" class="hidden"/>
  </form>
</template>

<template name="link">
<a href class="link-delete" data-id="{{_id}}">[delete]</a>
{{#if url}}
<a href="{{url}}">{{> linkText}}</a>
{{else}}
{{> linkText}}
{{/if}}
</template>

<template name="linkText">
{{#if text}}{{text}}{{else}}{{url}}{{/if}}
</template>
